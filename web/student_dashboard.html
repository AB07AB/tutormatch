<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Student Dashboard - TutorMatch</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1 class="dashboard-title">Student Dashboard</h1>
    <div>
      <label>Filter by Subject
        <select id="subject-filter"><option value="">All</option></select>
      </label>
      <label>Max Hourly Rate ($)
        <input type="number" id="rate-filter">
      </label>
      <button class="btn primary-btn" id="apply-btn">Apply Filters</button>
      <button class="btn secondary-btn" id="reset-btn">Reset Filters</button>
    </div>
    <table id="teachers-table">
      <thead>
        <tr><th>Name</th><th>Subjects</th><th>Hourly Rate</th><th>Education</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="mt-20">
      <a class="back-link" href="index.html">&larr; Back</a>
    </div>
  </div>
<script>
let teachers = [];
const tableBody = document.querySelector('#teachers-table tbody');
function renderTable(data){
  tableBody.innerHTML = '';
  data.forEach(t => {
    const tr=document.createElement('tr');
    tr.innerHTML = `<td><a href="teacher_details.html?name=${encodeURIComponent(t.name)}">${t.name}</a></td><td>${t.subjects}</td><td>${t.hourly_rate}</td><td>${t.school}</td>`;
    tableBody.appendChild(tr);
  });
}
fetch('teachers.json').then(r=>r.json()).then(data=>{
  teachers=data;
  const subjects = new Set();
  data.forEach(t => t.subjects.split(',').forEach(s=>subjects.add(s.trim())));
  const subjectSelect = document.getElementById('subject-filter');
  subjects.forEach(s => {
    const opt=document.createElement('option'); opt.value=s; opt.textContent=s; subjectSelect.appendChild(opt);
  });
  renderTable(teachers);
});
document.getElementById('apply-btn').addEventListener('click', ()=>{
  const subject = document.getElementById('subject-filter').value;
  const rate = parseFloat(document.getElementById('rate-filter').value);
  let filtered=teachers;
  if(subject) filtered = filtered.filter(t => t.subjects.includes(subject));
  if(!isNaN(rate)) filtered = filtered.filter(t => t.hourly_rate <= rate);
  renderTable(filtered);
});
document.getElementById('reset-btn').addEventListener('click', ()=>{
  document.getElementById('subject-filter').value='';
  document.getElementById('rate-filter').value='';
  renderTable(teachers);
});
</script>
</body>
</html>
